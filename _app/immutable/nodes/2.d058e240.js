import{s as j,n as A,r as le,o as re,a as oe,b as ae}from"../chunks/scheduler.e108d1fd.js";import{S as F,i as K,e as M,a as V,f as m,g as v,s as S,m as N,h as g,j as y,x as P,c as $,n as z,k as p,l as G,y as b,o as X,z as B,A as H,B as ce,d as D,b as J,t as U,C as ie,p as Q,r as W,u as Y,v as Z,w as ee}from"../chunks/index.6006ec2e.js";import{C as fe,g as ue,i as de,a as he,c as _e,q as me,e as be}from"../chunks/chatbot.aa79c4af.js";import{b as te}from"../chunks/paths.a5146912.js";function L(o){return(o==null?void 0:o.length)!==void 0?o:Array.from(o)}function pe(o){let e,t,s=`<div class="w-10 rounded-full"><img src="${te}/turtle.png" class="invert" alt="ChatGPT profile"/></div>`,l,n,r;return{c(){e=v("div"),t=v("div"),t.innerHTML=s,l=S(),n=v("div"),r=N(o[1]),this.h()},l(f){e=g(f,"DIV",{class:!0});var a=y(e);t=g(a,"DIV",{class:!0,"data-svelte-h":!0}),P(t)!=="svelte-uc30a3"&&(t.innerHTML=s),l=$(a),n=g(a,"DIV",{class:!0,style:!0});var d=y(n);r=z(d,o[1]),d.forEach(m),a.forEach(m),this.h()},h(){p(t,"class","chat-image avatar"),p(n,"class","chat-bubble chat-bubble-secondary"),G(n,"white-space","pre-line"),p(e,"class","chat chat-start")},m(f,a){V(f,e,a),b(e,t),b(e,l),b(e,n),b(n,r)},p(f,a){a&2&&X(r,f[1])},d(f){f&&m(e)}}}function ve(o){let e,t,s;return{c(){e=v("div"),t=v("div"),s=N(o[1]),this.h()},l(l){e=g(l,"DIV",{class:!0});var n=y(e);t=g(n,"DIV",{class:!0,style:!0});var r=y(t);s=z(r,o[1]),r.forEach(m),n.forEach(m),this.h()},h(){p(t,"class","chat-bubble chat-bubble-primary"),G(t,"white-space","pre-line"),p(e,"class","chat chat-end")},m(l,n){V(l,e,n),b(e,t),b(t,s)},p(l,n){n&2&&X(s,l[1])},d(l){l&&m(e)}}}function ge(o){let e;function t(n,r){return n[0]?ve:pe}let s=t(o),l=s(o);return{c(){l.c(),e=M()},l(n){l.l(n),e=M()},m(n,r){l.m(n,r),V(n,e,r)},p(n,[r]){s===(s=t(n))&&l?l.p(n,r):(l.d(1),l=s(n),l&&(l.c(),l.m(e.parentNode,e)))},i:A,o:A,d(n){n&&m(e),l.d(n)}}}function ye(o,e,t){let{isUser:s=!1}=e,{content:l}=e;return o.$$set=n=>{"isUser"in n&&t(0,s=n.isUser),"content"in n&&t(1,l=n.content)},[s,l]}class ne extends F{constructor(e){super(),K(this,e,ye,ge,j,{isUser:0,content:1})}}function O(o,e,t){const s=o.slice();return s[8]=e[t],s}function ke(o){let e,t;return e=new ne({props:{content:o[8].content}}),{c(){W(e.$$.fragment)},l(s){Y(e.$$.fragment,s)},m(s,l){Z(e,s,l),t=!0},p(s,l){const n={};l&1&&(n.content=s[8].content),e.$set(n)},i(s){t||(D(e.$$.fragment,s),t=!0)},o(s){U(e.$$.fragment,s),t=!1},d(s){ee(e,s)}}}function we(o){let e,t;return e=new ne({props:{isUser:!0,content:o[8].content}}),{c(){W(e.$$.fragment)},l(s){Y(e.$$.fragment,s)},m(s,l){Z(e,s,l),t=!0},p(s,l){const n={};l&1&&(n.content=s[8].content),e.$set(n)},i(s){t||(D(e.$$.fragment,s),t=!0)},o(s){U(e.$$.fragment,s),t=!1},d(s){ee(e,s)}}}function R(o){let e,t,s,l;const n=[we,ke],r=[];function f(a,d){return a[8].isUser?0:1}return e=f(o),t=r[e]=n[e](o),{c(){t.c(),s=M()},l(a){t.l(a),s=M()},m(a,d){r[e].m(a,d),V(a,s,d),l=!0},p(a,d){let k=e;e=f(a),e===k?r[e].p(a,d):(Q(),U(r[k],1,1,()=>{r[k]=null}),J(),t=r[e],t?t.p(a,d):(t=r[e]=n[e](a),t.c()),D(t,1),t.m(s.parentNode,s))},i(a){l||(D(t),l=!0)},o(a){U(t),l=!1},d(a){a&&m(s),r[e].d(a)}}}function Ee(o){let e,t,s,l,n,r,f,a,d,k='<button type="submit" class="btn btn-primary">Submit</button>',_,w,T,E=L(o[0]),c=[];for(let i=0;i<E.length;i+=1)c[i]=R(O(o,E,i));const se=i=>U(c[i],1,1,()=>{c[i]=null});return{c(){e=v("div"),t=v("div");for(let i=0;i<c.length;i+=1)c[i].c();s=S(),l=v("footer"),n=v("form"),r=v("div"),f=v("textarea"),a=S(),d=v("div"),d.innerHTML=k,this.h()},l(i){e=g(i,"DIV",{class:!0});var h=y(e);t=g(h,"DIV",{class:!0});var u=y(t);for(let q=0;q<c.length;q+=1)c[q].l(u);u.forEach(m),s=$(h),l=g(h,"FOOTER",{class:!0});var I=y(l);n=g(I,"FORM",{class:!0});var C=y(n);r=g(C,"DIV",{class:!0});var x=y(r);f=g(x,"TEXTAREA",{class:!0,placeholder:!0}),y(f).forEach(m),x.forEach(m),a=$(C),d=g(C,"DIV",{class:!0,"data-svelte-h":!0}),P(d)!=="svelte-132mtek"&&(d.innerHTML=k),C.forEach(m),I.forEach(m),h.forEach(m),this.h()},h(){p(t,"class","container p-2 pb-10 grow"),p(f,"class","textarea textarea-bordered items-center grid-flow-col w-full"),p(f,"placeholder",de),p(r,"class","w-full"),p(d,"class","grid-flow-col gap-4 md:place-self-center md:justify-self-end"),p(n,"class","flex w-full"),p(l,"class","footer footer-center text-base-content"),p(e,"class","flex flex-col h-full")},m(i,h){V(i,e,h),b(e,t);for(let u=0;u<c.length;u+=1)c[u]&&c[u].m(t,null);b(e,s),b(e,l),b(l,n),b(n,r),b(r,f),B(f,o[2]),b(n,a),b(n,d),o[6](n),_=!0,w||(T=[H(f,"input",o[5]),H(f,"keydown",o[4]),H(n,"submit",ce(o[3]))],w=!0)},p(i,[h]){if(h&1){E=L(i[0]);let u;for(u=0;u<E.length;u+=1){const I=O(i,E,u);c[u]?(c[u].p(I,h),D(c[u],1)):(c[u]=R(I),c[u].c(),D(c[u],1),c[u].m(t,null))}for(Q(),u=E.length;u<c.length;u+=1)se(u);J()}h&4&&B(f,i[2])},i(i){if(!_){for(let h=0;h<E.length;h+=1)D(c[h]);_=!0}},o(i){c=c.filter(Boolean);for(let h=0;h<c.length;h+=1)U(c[h]);_=!1},d(i){i&&m(e),ie(c,i),o[6](null),w=!1,le(T)}}}function De(o,e,t){let s,l=[{isUser:!1,content:he}],n,r;re(async()=>{try{s=fe.getInstance()}catch(_){console.log(_),ue(te+"/login")}}),oe(async()=>{window.scrollTo(0,document.body.scrollHeight)});function f(){const _={isUser:!0,content:r};t(0,l=[...l,_]),r===_e&&(s.resetThread(),t(2,r=me)),s.sendThreadMessage(r).then(w=>{const T={isUser:!1,content:w};t(0,l=[...l,T])}).catch(w=>{console.log(w);const T={isUser:!1,content:be};t(0,l=[...l,T])}),t(2,r="")}function a(_){_.key==="Enter"&&!_.shiftKey&&(_.preventDefault(),n.requestSubmit())}function d(){r=this.value,t(2,r)}function k(_){ae[_?"unshift":"push"](()=>{n=_,t(1,n)})}return[l,n,r,f,a,d,k]}class Ce extends F{constructor(e){super(),K(this,e,De,Ee,j,{})}}export{Ce as component};
