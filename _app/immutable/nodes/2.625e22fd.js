var re=Object.defineProperty;var oe=(r,e,t)=>e in r?re(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var S=(r,e,t)=>(oe(r,typeof e!="symbol"?e+"":e,t),t);import{s as j,n as L,r as ae,f as ce,a as ie,b as ue}from"../chunks/scheduler.2f7340eb.js";import{S as F,i as K,e as B,a as T,f as _,g as v,s as M,m as N,h as g,j as k,x as z,c as x,n as G,k as p,l as X,y as b,o as J,z as q,A,B as fe,d as C,b as Q,t as I,C as de,p as W,r as Y,u as Z,v as ee,w as te}from"../chunks/index.24168e23.js";import{C as he,g as _e}from"../chunks/chatapi.0afe47e0.js";import{b as ne}from"../chunks/paths.9f4df922.js";function O(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}class me{constructor(e){S(this,"chatapi");this.chatapi=e}}function be(r){let e,t,s=`<div class="w-10 rounded-full"><img src="${ne}/turtle.png" class="invert" alt="ChatGPT profile"/></div>`,l,n,o;return{c(){e=v("div"),t=v("div"),t.innerHTML=s,l=M(),n=v("div"),o=N(r[1]),this.h()},l(c){e=g(c,"DIV",{class:!0});var a=k(e);t=g(a,"DIV",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-uc30a3"&&(t.innerHTML=s),l=x(a),n=g(a,"DIV",{class:!0,style:!0});var d=k(n);o=G(d,r[1]),d.forEach(_),a.forEach(_),this.h()},h(){p(t,"class","chat-image avatar"),p(n,"class","chat-bubble chat-bubble-secondary"),X(n,"white-space","pre-line"),p(e,"class","chat chat-start")},m(c,a){T(c,e,a),b(e,t),b(e,l),b(e,n),b(n,o)},p(c,a){a&2&&J(o,c[1])},d(c){c&&_(e)}}}function pe(r){let e,t,s;return{c(){e=v("div"),t=v("div"),s=N(r[1]),this.h()},l(l){e=g(l,"DIV",{class:!0});var n=k(e);t=g(n,"DIV",{class:!0,style:!0});var o=k(t);s=G(o,r[1]),o.forEach(_),n.forEach(_),this.h()},h(){p(t,"class","chat-bubble chat-bubble-primary"),X(t,"white-space","pre-line"),p(e,"class","chat chat-end")},m(l,n){T(l,e,n),b(e,t),b(t,s)},p(l,n){n&2&&J(s,l[1])},d(l){l&&_(e)}}}function ve(r){let e;function t(n,o){return n[0]?pe:be}let s=t(r),l=s(r);return{c(){l.c(),e=B()},l(n){l.l(n),e=B()},m(n,o){l.m(n,o),T(n,e,o)},p(n,[o]){s===(s=t(n))&&l?l.p(n,o):(l.d(1),l=s(n),l&&(l.c(),l.m(e.parentNode,e)))},i:L,o:L,d(n){n&&_(e),l.d(n)}}}function ge(r,e,t){let{isUser:s=!1}=e,{content:l}=e;return r.$$set=n=>{"isUser"in n&&t(0,s=n.isUser),"content"in n&&t(1,l=n.content)},[s,l]}class se extends F{constructor(e){super(),K(this,e,ge,ve,j,{isUser:0,content:1})}}function P(r,e,t){const s=r.slice();return s[9]=e[t],s}function ye(r){let e,t;return e=new se({props:{content:r[9].content}}),{c(){Y(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,l){ee(e,s,l),t=!0},p(s,l){const n={};l&1&&(n.content=s[9].content),e.$set(n)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){I(e.$$.fragment,s),t=!1},d(s){te(e,s)}}}function ke(r){let e,t;return e=new se({props:{isUser:!0,content:r[9].content}}),{c(){Y(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,l){ee(e,s,l),t=!0},p(s,l){const n={};l&1&&(n.content=s[9].content),e.$set(n)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){I(e.$$.fragment,s),t=!1},d(s){te(e,s)}}}function R(r){let e,t,s,l;const n=[ke,ye],o=[];function c(a,d){return a[9].isUser?0:1}return e=c(r),t=o[e]=n[e](r),{c(){t.c(),s=B()},l(a){t.l(a),s=B()},m(a,d){o[e].m(a,d),T(a,s,d),l=!0},p(a,d){let w=e;e=c(a),e===w?o[e].p(a,d):(W(),I(o[w],1,1,()=>{o[w]=null}),Q(),t=o[e],t?t.p(a,d):(t=o[e]=n[e](a),t.c()),C(t,1),t.m(s.parentNode,s))},i(a){l||(C(t),l=!0)},o(a){I(t),l=!1},d(a){a&&_(s),o[e].d(a)}}}function we(r){let e,t,s,l,n,o,c,a,d,w='<button type="submit" class="btn btn-primary">Submit</button>',D,m,E,y=O(r[0]),i=[];for(let u=0;u<y.length;u+=1)i[u]=R(P(r,y,u));const le=u=>I(i[u],1,1,()=>{i[u]=null});return{c(){e=v("div"),t=v("div");for(let u=0;u<i.length;u+=1)i[u].c();s=M(),l=v("footer"),n=v("form"),o=v("div"),c=v("textarea"),a=M(),d=v("div"),d.innerHTML=w,this.h()},l(u){e=g(u,"DIV",{class:!0});var h=k(e);t=g(h,"DIV",{class:!0});var f=k(t);for(let $=0;$<i.length;$+=1)i[$].l(f);f.forEach(_),s=x(h),l=g(h,"FOOTER",{class:!0});var U=k(l);n=g(U,"FORM",{class:!0});var V=k(n);o=g(V,"DIV",{class:!0});var H=k(o);c=g(H,"TEXTAREA",{class:!0,placeholder:!0}),k(c).forEach(_),H.forEach(_),a=x(V),d=g(V,"DIV",{class:!0,"data-svelte-h":!0}),z(d)!=="svelte-132mtek"&&(d.innerHTML=w),V.forEach(_),U.forEach(_),h.forEach(_),this.h()},h(){p(t,"class","container p-2 pb-10 grow"),p(c,"class","textarea textarea-bordered items-center grid-flow-col w-full"),p(c,"placeholder","질문을 입력해주세요"),p(o,"class","w-full"),p(d,"class","grid-flow-col gap-4 md:place-self-center md:justify-self-end"),p(n,"class","flex w-full"),p(l,"class","footer footer-center text-base-content"),p(e,"class","flex flex-col h-full")},m(u,h){T(u,e,h),b(e,t);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(t,null);b(e,s),b(e,l),b(l,n),b(n,o),b(o,c),q(c,r[2]),b(n,a),b(n,d),r[6](n),D=!0,m||(E=[A(c,"input",r[5]),A(c,"keydown",r[4]),A(n,"submit",fe(r[3]))],m=!0)},p(u,[h]){if(h&1){y=O(u[0]);let f;for(f=0;f<y.length;f+=1){const U=P(u,y,f);i[f]?(i[f].p(U,h),C(i[f],1)):(i[f]=R(U),i[f].c(),C(i[f],1),i[f].m(t,null))}for(W(),f=y.length;f<i.length;f+=1)le(f);Q()}h&4&&q(c,u[2])},i(u){if(!D){for(let h=0;h<y.length;h+=1)C(i[h]);D=!0}},o(u){i=i.filter(Boolean);for(let h=0;h<i.length;h+=1)I(i[h]);D=!1},d(u){u&&_(e),de(i,u),r[6](null),m=!1,ae(E)}}}function Ce(r,e,t){let s,l,n=[],o,c;ce(async()=>{try{s=he.getInstance(),l=new me(s)}catch(m){console.log(m),_e(ne+"/login")}}),ie(async()=>{window.scrollTo(0,document.body.scrollHeight)});function a(){const m={isUser:!0,content:c};t(0,n=[...n,m]),s.sendMessage(c).then(E=>{const y={isUser:!1,content:E.text};t(0,n=[...n,y])}).catch(E=>{console.log(E);const y={isUser:!1,content:"오류가 발생했어요"};t(0,n=[...n,y])}),t(2,c="")}function d(m){m.key==="Enter"&&!m.shiftKey&&(m.preventDefault(),o.requestSubmit())}function w(){c=this.value,t(2,c)}function D(m){ue[m?"unshift":"push"](()=>{o=m,t(1,o)})}return[n,o,c,a,d,w,D]}class Ve extends F{constructor(e){super(),K(this,e,Ce,we,j,{})}}export{Ve as component};
